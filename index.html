<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
  <link rel="stylesheet" href="www/js/jquery.mobile-1.4.5.css" />
  <script src="www/js/jquery-1.11.1.js"></script>
  <script src="www/js/jquery.mobile-1.4.5.js"></script>
  <script src="www/js/jquery.validate.js"></script>

  <title>Hello World</title>
</head>

<body>
  <div id="page1" data-role="page">
    <div data-role="header">
      <h1>Welcome</h1>
    </div>
    <div data-role="content">
      <form id="Demo">
        <div data-role="fieldcontain">
          <label for="Name">Name: </label>
          <input type="text" name="Name" id="Name">
        </div>
        <input data-role="submit" type="submit" value="Login">
      </form>
    </div>
  </div>
  <div id="page2" data-role="page">
    <div data-role="header">
      <h1>ABC</h1>
    </div>


  </div>

</body>

</html>


<script>
  var db = window.openDatabase(
    "1661aasd",
    "1.0",
    "My Storeges",
    200000000000000
  );
  $(document).ready(function () {

    CreateDB();
  });
  $("#page1").on("pageinit", function () {
    $("form").validate({
      rules: {
        Name: {
          required: true
        }
      },
      messages: {
        Name: {
          required: 'Please Enter Name'
        }
      },
      errorPlacement: function (error, element) {
        error.insertAfter(element.parent());
      },
      submitHandler: function (form) {
        $(':mobile-pagecontainer').pagecontainer('change', '#page2', Submit());
        return false;
      }
    });

  });

  function Submit() {
    db.transaction(function (tx) {
      var namea = $("#Name").val();
      var sqlStatement = "INSERT INTO ABC(NAME) VALUES(?)";
      tx.executeSql(
        sqlStatement,
        [namea],
        function (tx, result) {
          $("#Name").val("");
          console.log("DONE");
        }
      )
    });

  }

  function CreateDB() {

    db.transaction(function (tx) {
      var sqlStatement =
        "CREATE TABLE IF NOT EXISTS ABC(ID INTEGER PRIMARY KEY AUTOINCREMENT,NAME TEXT)";
      tx.executeSql(
        sqlStatement,
        [],
        function (tx, result) {
          console.log("Create table MAIN success.");
        },
        function (error) {
          console.log("loi");
        }
      );
    });
  }
</script>